<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>Fungus: Text Variation System</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-59839218-1', 'auto');
  ga('send', 'pageview');
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" style="background-color: #B7CEEC;">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="https://fungusgames.com" target="_blank"><img alt="Logo" src="logo_small.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname"><!--Fungus-->
   &#160;<span id="projectnumber"><!--v3.11.4--></span>
   </div>
   <div id="projectbrief">v3.11.4 Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('text_variation_system.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Text Variation System </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#future_work">Future Work</a></li>
</ul>
</div>
<div class="textblock"><p>A system for selecting a sub section of a larger string. Allows for simple changes to occur within the same block of text, instead of having to create multiple commands. The Text Variation System is inspired by <a href="https://github.com/inkle/ink">Ink</a>'s <a href="https://github.com/inkle/ink/blob/master/Documentation/WritingWithInk.md#6-variable-text">Variable Text system</a>. <a class="el" href="namespace_fungus.html">Fungus</a>' Writer and Menu classes currently use this system, as such Say, Menu and Conversation commands can make use of it. <a class="el" href="namespace_fungus.html">Fungus</a> Lua actions that result in Lua passing strings to the <a class="el" href="namespace_fungus.html">Fungus</a> Writer or Menu will also work.</p>
<p>Handles replacing vary text segments. Keeps history of previous replacements to allow for ordered sequence of variation.</p><ul>
<li>[] mark the bounds of the vary section</li>
<li>| divide elements within the variation</li>
</ul>
<p>Default behaviour is to show one element after another and hold the final element. Such that [1|2|3] will show 1 the first time it is parsed, 2 the second and every subsequent time it will show 3.</p>
<p>Empty sections are allowed, such that [a||c], on second showing it will have 0 characters.</p>
<p>Supports nested sections, that are only evaluated if their parent element is chosen.</p>
<p>This behaviour can be modified with certain characters at the start of the [], e.g. [&amp;a|b|c];</p><ul>
<li>&amp; does not hold the final element it wraps back around to the beginning in a looping fashion</li>
<li>! does not hold the final element, it instead returns empty for the varying section</li>
<li>~ chooses a random element every time it is encountered</li>
</ul>
<h1><a class="anchor" id="example"></a>
Example</h1>
<p>In a simple case you may want to have a line read differently the first time the user encounters it. Perhaps a shop keeper, first time they say </p><div class="fragment"><div class="line">Hail and well met, stranger. What can I help you with?</div></div><!-- fragment --><p> but when the same block is run again you want it to be more friendly </p><div class="fragment"><div class="line">Welcome back, friend. What can I help you with?</div></div><!-- fragment --><p> Instead of creating diverging blocks of commands we could use text variation of. </p><div class="fragment"><div class="line">[Hail and well met, stranger|Welcome back, friend]. What can I help you with?</div></div><!-- fragment --><p>Another common usage is for commonly repeated blocks where players return for menus or story branching points. You may want there to be some variation so it feels more natural. Perhaps by varying the greeting used to be randomised, among;</p><ul>
<li>Mornin.</li>
<li>G'day.</li>
<li>How's it hanging?</li>
<li>Oi oi.</li>
<li>How are we?</li>
<li>Let's do this.</li>
</ul>
<p>We could do a variation of </p><div class="fragment"><div class="line">[~Mornin.|G&#39;day.|How&#39;s it hanging?|Oi oi.|How are we?|Let&#39;s do this.]</div></div><!-- fragment --><p>For a more complete and thorough example, see example scene at FungusExamples\VariationText\TextVariation.unity</p>
<h1><a class="anchor" id="future_work"></a>
Future Work</h1>
<ul>
<li>Bundling of state tracking of variations so they can be saved along with other fungus data in save files</li>
<li>Loading and Unbundling of state tracking for variations so that variations can continue across instances of the applications life.</li>
<li>Conditional vary sections: sections that are only valid if a fungus variable is in a certain state. </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">%Fungus Documentation</a></li>
    <li class="footer">Generated on Fri May 3 2019 23:38:43 for Fungus by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
