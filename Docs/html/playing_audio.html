<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Fungus: Playing Audio</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" style="background-color: #B7CEEC;">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="https://fungusgames.com" target="_blank"><img alt="Logo" src="logo_small.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname"><!--Fungus-->
   &#160;<span id="projectnumber"><!--3.2--></span>
   </div>
   <div id="projectbrief">Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('playing_audio.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Playing Audio </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#free_audio">Sources of free audio</a></li>
<li class="level1"><a href="#adding">Adding audio to your project</a></li>
<li class="level1"><a href="#working">Working with audio</a></li>
<li class="level1"><a href="#commands">Fungus audio commands</a></li>
<li class="level1"><a href="#tags">Audio Tags</a></li>
</ul>
</div>
<div class="textblock"><p>Almost every game benefits from some sound! Often we categorise audio clips into three kinds:</p>
<ol type="1">
<li>Music</li>
<li>Sound effects</li>
<li>Speech</li>
</ol>
<p>Fungus provides straightforward ways to include all 3 kinds of audio clip in your game, using the techniques presented here.</p>
<h1><a class="anchor" id="free_audio"></a>
Sources of free audio</h1>
<p>Before you can <b>add</b> audio clips to a game you need to get some audio clips. Here are some sources of audio clips to use when learning about audio in Fungus, in case you don't have some of your own to hand.</p>
<p>The following are some good places online to fine music and sound effects for games. Some are free for any use (including commerical), some are just free for personal use. As always, check the licence of media assets before using them for any commerical products ...</p>
<ul>
<li><a href="http://www.freesound.org/">Freesound.org</a></li>
<li>lots of creative commons and royalty free sounds at <a href="http://soundbible.com/royalty-free-sounds-1.html">SoundBible.com</a></li>
<li>a great list of audio sources in peoples answers to questions at <a href="http://answers.unity3d.com/questions/7743/where-can-i-find-music-or-sound-effects-for-my-gam.html">Answers.unity3d</a> and <a href="http://stackoverflow.com/questions/1210286/where-can-i-find-free-sound-effects-for-a-game">StackOverflow.com</a></li>
<li>mixture of free and paid music sources at <a href="http://www.pixelprospector.com/the-big-list-of-royalty-free-music-and-sounds-free-edition/">PixelProspector.com</a></li>
</ul>
<p>You'll find a range of audio clips included inside the Fungus Examples folders:</p>
<div class="image">
<img src="0_audio_in_examples.png" alt="0_audio_in_examples.png"/>
<div class="caption">
%Fungus Examples audio</div></div>
 <h1><a class="anchor" id="adding"></a>
Adding audio to your project</h1>
<p>Once you have some audio clips on your computer, you need to import them into your Unity project.</p>
<h2>Method 1 (menu)</h2>
<p>You can do this one clip at a time, by choosing menu: <code>Assets | Import New Asset...</code> and navigating to and selecting each clip.</p>
<h2>Method 2 (drag-drop)</h2>
<p>Alternatively you can <b>drag</b> files or entire folders into your Unity Project window, and Unity will make a copy of, and then import the dragged files:</p>
<div class="image">
<img src="1_drag_folder.png" alt="1_drag_folder.png"/>
<div class="caption">
drag audio folder into Unity</div></div>
<h1><a class="anchor" id="working"></a>
Working with audio</h1>
<p>There are 3 main ways to work with audio in Fungus games. These are the Audio commands, the Say command, and gameObjects containing Unity Audio Source components. All three are discussed below:</p>
<div class="image">
<img src="1_big_picture.png" alt="1_big_picture.png"/>
<div class="caption">
audio big picture</div></div>
<h1><a class="anchor" id="commands"></a>
Fungus audio commands</h1>
<p>The range of audio <b>Commands</b> you can add to a Block are as follows:</p>
<div class="image">
<img src="1_audio_commands.png" alt="1_audio_commands.png"/>
<div class="caption">
%Fungus audio commands</div></div>
<p> Also you can declare an audio clip that contains the speech voiceover to correspond to text displayed with a <b>Say</b> command:</p>
<div class="image">
<img src="2_say_voiceover_clip.png" alt="2_say_voiceover_clip.png"/>
<div class="caption">
%Fungus audio commands</div></div>
<h2>Play Music command</h2>
<p>Music sound clips loop, so they are restarted once they have finished playing. Often the first Command in a Block is a <b>Play Music</b> Command. Add music to a Block as follows:</p>
<ol type="1">
<li>(if you have not already done so: Create a new scene, add a Fungus Flowchart to the scene, and select the Block in the Flowchart).</li>
<li>Add a Play Music Command to the current Block by clicking the Add Command (plus-sign "+" button) in the Inspector, and then choosing menu: <code>Audio | Play Music</code>.</li>
<li>Ensure the Play Music command is selected (green highlight) in the top of the Inspector, and then drag the desired music clip file into the "Music Clip" property in the bottom half of the Inspector: <div class="image">
<img src="1_add_playmusic_command.png" alt="1_add_playmusic_command.png"/>
<div class="caption">
Add Play Music command</div></div>
</li>
<li>Change the volume as desired (the default is 1, values are between 0.0 and 1.0, representing percentages of volume from 0% - 100%).</li>
<li>Play your scene - the music clip should play, and keep looping.</li>
</ol>
<p>NOTE: If you wish to start playing the music clip from a known time-point (rather than from the beginning), then enter the desired timepoint in the Inspector property "At Time" for your Play Music command.</p>
<h2>Play Sound command</h2>
<p>The Fungus Play Sound Command will play a stated audio clip once. With your Flowchart Block selected, click the Add Command button in the Inspector and choose menu: <code>Audio | Play Sound</code>. Drag in a sound effect (we chose the BearRoad sound from the Hunter example):</p>
<div class="image">
<img src="1_play_sound.png" alt="1_play_sound.png"/>
<div class="caption">
Play Sound command</div></div>
<p> Play the scene, you should hear your sound effect play once.</p>
<p>Note. The default Fungus setting is for the sound effect to start playing, and while it is playing the next Command in the Block will start executing. However, you if you check the "Wait Until Finished" checkbox, then Fungus will wait until the sound effect has finished playing, before moving on to execute the next Command in the block:</p>
<div class="image">
<img src="2_wait_until_finished.png" alt="2_wait_until_finished.png"/>
<div class="caption">
wait until finished</div></div>
<h2>Set Audio Volume command</h2>
<p>The default volume for music being played is 1 (100%). However, we can change this easily with the Set Audio Volume command. Do the following:</p>
<ol type="1">
<li>(if you have not already done so: Create a new scene, add a Fungus Flowchart to the scene, and select the Block in the Flowchart).</li>
<li>Rename this Block "Play Music".</li>
<li>Add a Play Music Command to the current Block, then drag the desired music clip file into the "Music Clip" property in the bottom half of the Inspector: <div class="image">
<img src="1_drag_music_clip.png" alt="1_drag_music_clip.png"/>
<div class="caption">
sherlock music</div></div>
</li>
<li>If you play the scene now, the music will play at full volume (1 = 100%).</li>
<li>Now create a second Block in the Flowchart window named "quieter". <div class="image">
<img src="2_second_block.png" alt="2_second_block.png"/>
<div class="caption">
new block quieter</div></div>
</li>
<li>Add to this new Block a Set Audio Volume Command. <div class="image">
<img src="4_audio_volume_command.png" alt="4_audio_volume_command.png"/>
<div class="caption">
Add audio volume command</div></div>
</li>
<li>In the properties of the Set Audio Volume Command set the volume to 0.25 (25%). <div class="image">
<img src="3_quieter.png" alt="3_quieter.png"/>
<div class="caption">
set audio volume quieter</div></div>
</li>
<li>Select the "Play Music" block, and add a Menu command by clicking the plus-sign add Command button in the Inspector and then choosing menu: <code>Narrative | Menu</code>. <div class="image">
<img src="5_add_menu.png" alt="5_add_menu.png"/>
<div class="caption">
add menu command</div></div>
</li>
<li>Set the Text Property to "Make Quieter" and the Target Block to Block "Quieter": <div class="image">
<img src="6_link_to_quieter.png" alt="6_link_to_quieter.png"/>
<div class="caption">
menu properties</div></div>
</li>
<li>In the Flowchart window you should now see a green arrow, showing that a Command in Block "Play Music" passes control to Block "quieter": <div class="image">
<img src="7_green_arrow.png" alt="7_green_arrow.png"/>
<div class="caption">
green arrow</div></div>
</li>
<li>When you run the scene, the music will start playing at full volume, then when y ou click the "Make Quieter" button, control will pass to the "quieter" block, and you'll hear the music become much quieter after the Set Audio Volume Command has been executed with a value of 25% (0.25): <div class="image">
<img src="8_output.png" alt="8_output.png"/>
<div class="caption">
set audio running</div></div>
 <h2>The 3 Unity audio concepts</h2>
</li>
</ol>
<p>Unity has 3 different kinds of Audio 'object', that it is worth understanding when working with audio in Fungus (or any other) Unity project:</p>
<ol type="1">
<li>Audio Clip</li>
<li>Audio Listener</li>
<li>Audio Source</li>
</ol>
<h3>Unity Audio Clip</h3>
<p>Unity uses the term Audio "Clip" to refer to the physical sound files (.mp3, .wav, .ogg etc.) that are stored in your Project folder. It is these Audio Clip files that you drag and drop into the "Music Clip" and "Sound Clip" properties in the Inspector Window, when creating Play Music and Play Sound Commands in a Fungus Block.</p>
<h3>Unity Audio "Listener"</h3>
<p>Basically, if you want sound to be played there must be an Audio Listener component inside one of the gameObjects in your scene. The Main Camera of a scene has one by default, so in most cases you just leave this alone and can rest assured that you have an Audio Listener.</p>
<p>If a scene has no Audio Listener in any gameObject, then no audio will be heard by the user of the game, regardless of how many music and sound clips might be playing.</p>
<p>Sometimes you may add gameObjects to your scene that contain another Audio Listener component. In this case, Unity will present a warning message stating that more than 1 Audio Listener is present in the scene. If you see such a message, then its best to resolve this problem by disabling all but one Audio Listener...</p>
<p>If you are working with a 3D game, and/or you wish to present a sophisticated stereo sound experience for your user, then you may need to learn about 3D audio. In such games the 3D "position" of the gameObject containing the Audio Listener becomes important - but don't worry about this if you are just getting started with audio in Fungus. For 3D effects the Audio Listener is like an "electronic ear", so its location determines things like how loud a sound is played (distance from "ear") and left-right stereo balance (which "side" audio is to the "ear") etc.</p>
<h3>Unity Audio Source</h3>
<p>In Unity the link between an Audio Clip (music/sound) file that we wish to be played, and the Audio Listener in the scene is a Unity Audio Source component of a gameObject. However, in most cases Fungus creates one of these if needed, so we don't need to worry about them!</p>
<p>However, for sophisticated control of music and sound and speech in your game there is the facility to make Fungus have detailed control of Unity Audio Sources. It is an Audio Source component that controls how and when and which part of an audio clip is playing (and whether it should loop or not), and whether it is playing or paused, and when resuming should continue from where paused or restart. The volume of a playing clip can also be controlled by properties of an Audio Source.</p>
<p>Learn more about audio in Unity at the <a href="http://docs.unity3d.com/Manual/AudioOverview.html">Unity Manual Audio Page</a>.</p>
<h2>Control Audio command</h2>
<p>The Fungus Audio Commands cover all common music and sound effect actions, for specialist audio work you may need to access the raw (and complicated) power of Unity audio. The Fungus Command "Control Audio" lets Fungus Blocks communicate directly with Unity Audio Source components in any gameObject in the current scene, so your wizard audio team member can do what they need to do with the Unity toolkit, and you can still control playing / looping / volume etc. of the audio in those complex gameObjects.</p>
<p>The Control Audio Command offers five actions that can be communicated to Unity Audio Source components:</p>
<div class="image">
<img src="6_control_audio_actions.png" alt="6_control_audio_actions.png"/>
<div class="caption">
control audio options</div></div>
<p> We'll learn about this with a simple Unity gameObject that plays a bear sound two times, first at full volume and then reduces the volume before playing a second time, using three "Control Audio" Fungus Commands. Do the following:</p>
<ol type="1">
<li>(setup) If you have not already done so: Create a new scene, add a Fungus Flowchart to the scene, and select the Block in the Flowchart.</li>
<li>Rename this Block "Control Audio".</li>
<li>In the Hierarchy Window create a new Empty gameObject, choose menu: <code>Create | Create Empty</code>: <div class="image">
<img src="1_create_empty.png" alt="1_create_empty.png"/>
<div class="caption">
create empty</div></div>
</li>
<li>Rename this new empty gameObject "GameObject - bear sound" (or whatever sound name makes sense in your project).</li>
<li>Locate your desired audio clip file in the Project window, and (with "GameObject - bear sound" selected), drag a reference to the audio clip from the Project window into the Inspector: <div class="image">
<img src="2_rename.png" alt="2_rename.png"/>
<div class="caption">
rename empty</div></div>
</li>
<li>An Audio Source component should now be added in the Inspector to "GameObject - bear sound". Un-check the Play On Awake property in the Inspector (to stop this sound from playing as soon as the scene begins - <b>we</b> want to be in control of this Audio Source object...): <div class="image">
<img src="3_drag_clip.png" alt="3_drag_clip.png"/>
<div class="caption">
audio source added</div></div>
</li>
<li>With your Flowchart Block selected, click the Add Command button in the Inspector and choose menu: <code>Audio | Control Audio</code>. <div class="image">
<img src="4_add_command.png" alt="4_add_command.png"/>
<div class="caption">
Control Audio command</div></div>
. Drag the "GameObject - bear sound" gameObject from the Hierarchy into the Audio Source property in the Inspector, and select the Wait Until Finished checkbox (so Fungus will wait for the sound to finish playing before moving on): <div class="image">
<img src="5_drag_gameobject.png" alt="5_drag_gameobject.png"/>
<div class="caption">
drag gameobject</div></div>
</li>
<li>Note that the default Control action for a Control Audio Command is "Play Once" - we'll leave this property unchanged, since we want our bear sound inside our gameObject to be played once.</li>
<li>If you run the scene now, you'll hear the bear sound play once at full volume.</li>
<li>Since all three of the Control Audio commands we need use a link to "GameObject - bear sound" the fastest workflow is to <b>duplicate</b> each Command, and just change the bits we need. So duplicate your Control Audio command by clicking the Duplicate Command button: <div class="image">
<img src="7_duplicate.png" alt="7_duplicate.png"/>
<div class="caption">
duplicate command</div></div>
</li>
<li>In the newly copied command, change the Command action to Change Volume, and choose a volume of 0.25 (25%): <div class="image">
<img src="8_set_volume.png" alt="8_set_volume.png"/>
<div class="caption">
set volume</div></div>
</li>
<li>Once again, make a duplicate of the first Control Audio Command (that Plays the sound). Drag this new Command to be last in the sequence of commands. <div class="image">
<img src="9_final_commands.png" alt="9_final_commands.png"/>
<div class="caption">
another play again command</div></div>
</li>
<li>Now when you play the scene, first the bear sound linked to in the Audio Source component of gameObject "GameObject - bear sound" should play at full volume, then (after having its volume reduced to 25%) it should play a second time at a much reduced volume.</li>
</ol>
<h1><a class="anchor" id="tags"></a>
Audio Tags</h1>
<p>Since often dialog authors will know just what sound effects or music they wish to associate with their characters utterances, Fungus allows audio-related 'tags' to be embedded in the text of Say Commands. There are four audio related tags: </p><pre class="fragment">{audio=AudioObjectName} Play Audio Once
{audioloop=AudioObjectName} Play Audio Loop
{audiopause=AudioObjectName} Pause Audio
{audiostop=AudioObjectName} Stop Audio
</pre><p>Using tags like this make it important to carefully <b>name</b> the gameObjects in the Hierarchy window. To explore how to control sounds in gameObjects do the following:</p>
<ol type="1">
<li>(setup) If you have not already done so: Create a new scene, add a Fungus Flowchart to the scene, and select the Block in the Flowchart.</li>
<li>Rename this Block "Say audio tags".</li>
<li>In the Hierarchy Window create a new Empty gameObject, choose menu: <code>Create | Create Empty</code>: <div class="image">
<img src="1_create_empty.png" alt="1_create_empty.png"/>
<div class="caption">
create empty</div></div>
</li>
<li>Rename this new empty gameObject "audioBearRoar", or whatever sound name makes sense in your project, but avoid spaces in the name of this game object.</li>
<li>Locate your desired audio clip file in the Project window, and (with "audioBearRoar" selected), drag a reference to the audio clip from the Project window into the Inspector.</li>
<li>Un-check the Play On Awake property in the Inspector for the Audio Source component (to stop this sound from playing as soon as the scene begins - <b>we</b> want to be in control of this Audio Source object...):</li>
<li>With your Flowchart Block selected, click the Add Command button in the Inspector and choose menu: <code>Narrative | Say</code>. Enter the following for the Story Text property of this Say Command "... and then the bear roared loudly {audio=audioBearRoar}": <div class="image">
<img src="1_say_tags.png" alt="1_say_tags.png"/>
<div class="caption">
Say audio tag</div></div>
</li>
<li>Run your scene - the bear sound will play after the text has been displayed: <div class="image">
<img src="2_output.png" alt="2_output.png"/>
<div class="caption">
Say audio tag - output</div></div>
</li>
</ol>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">%Fungus Documentation</a></li>
    <li class="footer">Generated on Wed Sep 28 2016 14:38:58 for Fungus by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
